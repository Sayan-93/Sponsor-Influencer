<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="../static/SponsorAdRequest.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.slim.js" integrity="sha256-UgvvN8vBkgO0luPSUl2s8TIlOSYRoGFAX4jlCIm9Adc=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
                <!-- Navbar -->
         {% if user_type == 'sponsor' %}
                
    <div class="bg-body-tertiary navbar-div">
      
        <ul class="nav justify-content-center">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/sponsor-page">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/sponsor-search">Search influencers</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/sponsor_ad_request_page">Ad requests</a>
          </li>
          <li>
            <form class="logout" action="/logout" method="post">
                <button class="btn btn-dark">Logout</button>
            </form>
          </li>
        </ul>
    </div>
            {% endif %}

        {% if user_type == 'influencer' %}
            <div class="bg-body-tertiary navbar-div">
        
                <ul class="nav justify-content-center">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/influencer-page">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/influencer-search-campaign">Search campaigns</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/influencer_ad_request">Ad requests</a>
                </li>
                <li>
                    <form class="logout" action="/logout" method="post">
                        <button class="btn btn-dark">Logout</button>
                    </form>
                </li>
                </ul>
            </div>
        {% endif %}


    <!-- Ad request handler for sponsors -->

    {% if user_type == 'sponsor' %}

        <h3>Ad requests</h3>

        &nbsp;&nbsp;

    <table class="table">

        {% for campaign in campaign_list %}

            {% for ad_request in ad_request_list %}

                {% if campaign.id == ad_request.campaign_id %}

                    {% if ad_request.request_type == 'S' and ad_request.request_status == 'pending' %}
                        
                        <tr>
                            <div class="row cards">
                                <div class="col-sm-6 mb-3 mb-sm-0">
                                <div class="card text-bg-light mb-3">

                                    <h5 class="card-header" id="cardTitle">{{campaign.title}}</h5>

                                    <div class="card-body">
                                        
                                        <p class="card-text">{{campaign.description}}</p>
                                        <p class="card-text">Industry: {{campaign.industry}}</p>
                                        <p class="card-text">Created: {{campaign.start_date.date()}} &nbsp;&nbsp;  Ends at: {{campaign.end_date.date()}}</p>
                                    
                                        <div>
                                            <button type="submit" class="btn btn-primary">Unsend request</button>
                                            &nbsp;&nbsp;
                                            Ad request sent to {{ad_request.influencer_name}}
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </tr>
                    {% elif ad_request.request_type == 'S' and ad_request.request_status == 'accepted' %}

                    {% elif ad_request.request_type == 'S' and ad_request.request_status == 'rejected' %}

                    {% elif ad_request.request_type == 'I' and ad_request.request_status == 'pending' %}

                    {% elif ad_request.request_type == 'I' and ad_request.request_status == 'accepted' %}

                    {% elif ad_request.request_type == 'I' and ad_request.request_status == 'rejected' %}

                    {% endif %}

                {% endif %}

            {% endfor %}

        {% endfor %}

    </table>

    <!-- Ad request handler for influencers -->

    {% elif user_type == 'influencer' %}

        <h3>Ad requests</h3>

        

        &nbsp;&nbsp;

        <table class="table">
            <tbody>

        {% for campaign in campaign_list %}

            {% for ad_request in ad_request_list %}

                {% if campaign.id == ad_request.campaign_id %}

                    {% if ad_request.request_type == 'S' and ad_request.request_status == 'pending' %}

                    {% elif ad_request.request_type == 'S' and ad_request.request_status == 'accepted' %}

                    {% elif ad_request.request_type == 'S' and ad_request.request_status == 'rejected' %}

                    {% elif ad_request.request_type == 'I' and ad_request.request_status == 'pending' %}
                            <tr>
                                <div class="row cards">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                    <div class="card text-bg-light mb-3">

                                        <h5 class="card-header" id="cardTitle">{{campaign.title}}</h5>

                                        <div class="card-body">
                                            
                                            <p class="card-text">{{campaign.description}}</p>
                                            <p class="card-text">Industry: {{campaign.industry}}</p>
                                            <p class="card-text">Created: {{campaign.start_date.date()}} &nbsp;&nbsp;  Ends at: {{campaign.end_date.date()}}</p>
                                            <h4 class="card-text">Payment amount: {{campaign.budget}}</h4>
                                            &nbsp;
                                            <div>
                                                <button type="submit" class="btn btn-primary">Unsend request</button>
                                                &nbsp;&nbsp;
                                                Ad request sent to {{ad_request.sponsor_name}}
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </tr>


                    {% elif ad_request.request_type == 'I' and ad_request.request_status == 'accepted' %}

                    {% elif ad_request.request_type == 'I' and ad_request.request_status == 'rejected' %}

                    {% endif %}

                {% endif %}

            {% endfor %}

        {% endfor %}

    {% endif %}
        </tbody>
    </table>
</body>
</html>